{% extends 'members/base.html' %}

{% block content %}

  <div class="container">
    <h3>Edit Person Information</h3>
      <form id="edit_member_form" action="{% url 'members_app:save_member' %}" method="post">
        <div class="tile edit_form_align">
            {% csrf_token %}
          <div class="col_rw">
            <div class="row">
              <div class="form_fields">
                <label for="first_name">First Name*:</label>
                <input type="text" id="first_name" name="first_name" value="{{person.first_name}}" required>
              <!-- </div>
              <div class="form_fields"> -->
                <label for="last_name">Last Name*:</label>
                <input type="text" id="last_name" name="last_name" value="{{person.last_name}}" required>
              </div>
              <div class="form_fields">
                <label for="byline">Byline:</label>
                <input type="text" id="byline" name="byline" value="{{person.byline}}">
              </div>
              <div class="form_fields">
                <label for="nickname">Nickname:</label>
                <input type="text" id="nickname" name="nickname" value="{{person.nickname}}">
              </div>
              <div class="form_fields">
                <label for="email1">Email:</label>
                <input type="text" id="email" name="email" value="{{person.email}}">
              </div>
              <div class="form_fields">
                <label for="phone_number1">Phone:</label>
                <input type="text" id="phone_number" name="phone_number" value="{{person.phone_number}}">
              </div>
            </div><!-- end of 'row' -->
          </div><!-- end of 'col_rw' -->
          <div class="col_rw">
            <div class="row">
              <div class="form_fields">
                <label for="partner">Partner:</label>
                <select id="partner" name="partner">
                  <option value="">---</option>
                  {% for so in people %}
                    <option value="{{so.id}}"{% if person.partner.id == so.id %} selected{% endif %}>{{so.first_name}} {{so.last_name}}</option>
                  {% endfor %}
                </select>
              </div>
              <!-- <div class="form_fields">
                <label for="address_1">Address 1:</label>
                <input type="text" id="address_1" name="address_1" value="{{person.address.address_1}}">
              </div>
              <div class="form_fields">
                <label for="address_2">Address 2:</label>
                <input type="text" id="address_2" name="address_2" value="{{person.address.address_2}}">
              </div>
              <div class="form_fields">
                <label for="city">City:</label>
                <input type="text" id="city" name="city" value="{{person.address.city}}">
              </div>
              <div class="form_fields">
                <label for="state">State:</label>
                <select name="state" required id="state">
                  <option disabled selected></option>
                  <option value="AL"{% if person.address.state == 'AL' %} selected{%endif%}>Alabama</option>
                  <option value="AK"{% if person.address.state == 'AK' %} selected{%endif%}>Alaska</option>
                  <option value="AZ"{% if person.address.state == 'AZ' %} selected{%endif%}>Arizona</option>
                  <option value="AR"{% if person.address.state == 'AR' %} selected{%endif%}>Arkansas</option>
                  <option value="CA"{% if person.address.state == 'CA' %} selected{%endif%}>California</option>
                  <option value="CO"{% if person.address.state == 'CO' %} selected{%endif%}>Colorado</option>
                  <option value="CT"{% if person.address.state == 'CT' %} selected{%endif%}>Connecticut</option>
                  <option value="DE"{% if person.address.state == 'DE' %} selected{%endif%}>Delaware</option>
                  <option value="DC"{% if person.address.state == 'DC' %} selected{%endif%}>District Of Columbia</option>
                  <option value="FL"{% if person.address.state == 'FL' %} selected{%endif%}>Florida</option>
                  <option value="GA"{% if person.address.state == 'GA' %} selected{%endif%}>Georgia</option>
                  <option value="HI"{% if person.address.state == 'HI' %} selected{%endif%}>Hawaii</option>
                  <option value="ID"{% if person.address.state == 'ID' %} selected{%endif%}>Idaho</option>
                  <option value="IL"{% if person.address.state == 'IL' %} selected{%endif%}>Illinois</option>
                  <option value="IN"{% if person.address.state == 'IN' %} selected{%endif%}>Indiana</option>
                  <option value="IA"{% if person.address.state == 'IA' %} selected{%endif%}>Iowa</option>
                  <option value="KS"{% if person.address.state == 'KS' %} selected{%endif%}>Kansas</option>
                  <option value="KY"{% if person.address.state == 'KY' %} selected{%endif%}>Kentucky</option>
                  <option value="LA"{% if person.address.state == 'LA' %} selected{%endif%}>Louisiana</option>
                  <option value="ME"{% if person.address.state == 'ME' %} selected{%endif%}>Maine</option>
                  <option value="MD"{% if person.address.state == 'MD' %} selected{%endif%}>Maryland</option>
                  <option value="MA"{% if person.address.state == 'MA' %} selected{%endif%}>Massachusetts</option>
                  <option value="MI"{% if person.address.state == 'MI' %} selected{%endif%}>Michigan</option>
                  <option value="MN"{% if person.address.state == 'MN' %} selected{%endif%}>Minnesota</option>
                  <option value="MS"{% if person.address.state == 'MS' %} selected{%endif%}>Mississippi</option>
                  <option value="MO"{% if person.address.state == 'MO' %} selected{%endif%}>Missouri</option>
                  <option value="MT"{% if person.address.state == 'MT' %} selected{%endif%}>Montana</option>
                  <option value="NE"{% if person.address.state == 'NE' %} selected{%endif%}>Nebraska</option>
                  <option value="NV"{% if person.address.state == 'NV' %} selected{%endif%}>Nevada</option>
                  <option value="NH"{% if person.address.state == 'NH' %} selected{%endif%}>New Hampshire</option>
                  <option value="NJ"{% if person.address.state == 'NJ' %} selected{%endif%}>New Jersey</option>
                  <option value="NM"{% if person.address.state == 'NM' %} selected{%endif%}>New Mexico</option>
                  <option value="NY"{% if person.address.state == 'NY' %} selected{%endif%}>New York</option>
                  <option value="NC"{% if person.address.state == 'NC' %} selected{%endif%}>North Carolina</option>
                  <option value="ND"{% if person.address.state == 'ND' %} selected{%endif%}>North Dakota</option>
                  <option value="OH"{% if person.address.state == 'OH' %} selected{%endif%}>Ohio</option>
                  <option value="OK"{% if person.address.state == 'OK' %} selected{%endif%}>Oklahoma</option>
                  <option value="OR"{% if person.address.state == 'OR' %} selected{%endif%}>Oregon</option>
                  <option value="PA"{% if person.address.state == 'PA' %} selected{%endif%}>Pennsylvania</option>
                  <option value="RI"{% if person.address.state == 'RI' %} selected{%endif%}>Rhode Island</option>
                  <option value="SC"{% if person.address.state == 'SC' %} selected{%endif%}>South Carolina</option>
                  <option value="SD"{% if person.address.state == 'SD' %} selected{%endif%}>South Dakota</option>
                  <option value="TN"{% if person.address.state == 'TN' %} selected{%endif%}>Tennessee</option>
                  <option value="TX"{% if person.address.state == 'TX' %} selected{%endif%}>Texas</option>
                  <option value="UT"{% if person.address.state == 'UT' %} selected{%endif%}>Utah</option>
                  <option value="VT"{% if person.address.state == 'VT' %} selected{%endif%}>Vermont</option>
                  <option value="VA"{% if person.address.state == 'VA' %} selected{%endif%}>Virginia</option>
                  <option value="WA"{% if person.address.state == 'WA' %} selected{%endif%}>Washington</option>
                  <option value="WV"{% if person.address.state == 'WV' %} selected{%endif%}>West Virginia</option>
                  <option value="WI"{% if person.address.state == 'WI' %} selected{%endif%}>Wisconsin</option>
                  <option value="WY"{% if person.address.state == 'WY' %} selected{%endif%}>Wyoming</option>
                </select>
              </div>
              <div class="form_fields">
                <label for="postal_code">Postal Code:</label>
                <input type="text" id="postal_code" name="postal_code" value="{{person.address.postal_code}}">
              </div>
            </div>
          </div><!-- end of 'row' -->
          <div class="row">
            <div class="member_detail_section">
              <div class="member_detail_mailing_address">
                <b>Mailing Address</b> <a href="#" id="edit_address_link" class="edit_link">(edit)</a>:
                  <div class="">{{person.address.address_1}}</div>
                  <div class="">{{person.address.address_2}}</div>
                  <div class="">{{person.address.city}}, {{person.address.state}} {{person.address.postal_code}}</div>
              </div>
            </div>
          </div><!-- end of 'row' -->
        </div><!-- end of 'col_rw' -->
        <div class="clearfix"></div>
        <div class="form_fields submit_btn">
          <button type="submit" class="btn btn-secondary" id="save_changes_btn"><b>Save Changes</b></button>&nbsp;&nbsp;&nbsp;
          <a href="{% url 'members_app:show_person' person.id %}">cancel</a>
        </div>
        <input type="hidden" id="member_id" name="member_id" value="{{person.id}}">
      </form>
  </div> <!-- end of 'container' -->

  <!-- Button trigger modal -->
  <button style="display: none" id="show_edit_address" type="button" class="btn btn-primary" data-toggle="modal" data-target="#editAddressModal">
    Launch demo modal
  </button>

  <!-- Modal -->
  <div class="modal fade" id="editAddressModal" tabindex="-1" role="dialog" aria-labelledby="editAddressModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editAddressModal">Edit Address</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action = "" method = "post">
            {% csrf_token %}
            <table>
                {{ form.as_table }}
            </table>
            <input type="submit" value="Submit">
          </form>
        </div>
        <!-- <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div> -->
      </div>
    </div>
  </div>

  <script type="text/javascript">
    let edit_address_link = document.querySelector('#edit_address_link');
    let show_edit_address = document.querySelector('#show_edit_address');
    edit_address_link.onclick = function() {
      $('#show_edit_address').click();
    }
  </script>

{% endblock %}
